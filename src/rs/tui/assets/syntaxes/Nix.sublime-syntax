%YAML 1.2
---
name: Nix
file_extensions:
  - nix
scope: source.nix
contexts:
  main:
    - include: comments
    - include: strings
    - include: numbers
    - match: '\b(let|in|rec|with|inherit|if|then|else)\b'
      scope: keyword.control.nix
    - match: '\b(true|false|null)\b'
      scope: constant.language.nix
    - match: '[A-Za-z_][A-Za-z0-9_\-]*'
      scope: variable.other.nix

  comments:
    - match: '#.*$'
      scope: comment.line.number-sign.nix

  strings:
    - match: '"'
      scope: punctuation.definition.string.begin.nix
      push:
        - meta_scope: string.quoted.double.nix
        - match: '"'
          scope: punctuation.definition.string.end.nix
          pop: true
        - match: '\\.'
          scope: constant.character.escape.nix

  numbers:
    - match: '\b-?\d+(?:\.\d+)?\b'
      scope: constant.numeric.nix
