%YAML 1.2
---
name: CMake
file_extensions:
  - CMakeLists.txt
  - cmake
scope: source.cmake
contexts:
  main:
    - include: comments
    - include: strings
    - match: '\b(if|else|elseif|endif|function|endfunction|macro|endmacro|foreach|endforeach|while|endwhile|project|add_executable|add_library|target_link_libraries|set|include|find_package)\b'
      scope: keyword.control.cmake
    - match: '\$\{[A-Za-z_][A-Za-z0-9_]*\}'
      scope: variable.other.readwrite.cmake
    - match: '[A-Za-z_][A-Za-z0-9_]*\s*\('
      scope: entity.name.function.cmake

  comments:
    - match: '#.*$'
      scope: comment.line.number-sign.cmake

  strings:
    - match: '"'
      scope: punctuation.definition.string.begin.cmake
      push:
        - meta_scope: string.quoted.double.cmake
        - match: '"'
          scope: punctuation.definition.string.end.cmake
          pop: true
        - match: '\\.'
          scope: constant.character.escape.cmake
