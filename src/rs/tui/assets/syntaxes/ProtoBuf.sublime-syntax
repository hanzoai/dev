%YAML 1.2
---
name: Protocol Buffer
file_extensions:
  - proto
scope: source.protobuf
contexts:
  main:
    - include: comments
    - include: strings
    - include: numbers
    - match: '\b(syntax|package|import|option|message|enum|service|rpc|returns|oneof|map|repeated|required|optional)\b'
      scope: keyword.declaration.protobuf
    - match: '\b(true|false)\b'
      scope: constant.language.boolean.protobuf
    - match: '\b[A-Za-z_][A-Za-z0-9_]*\b'
      scope: entity.name.type.protobuf

  comments:
    - match: '//.*$'
      scope: comment.line.double-slash.protobuf
    - match: '/\*'
      scope: comment.block.protobuf
      push:
        - match: '\*/'
          pop: true

  strings:
    - match: '"'
      scope: punctuation.definition.string.begin.protobuf
      push:
        - meta_scope: string.quoted.double.protobuf
        - match: '"'
          scope: punctuation.definition.string.end.protobuf
          pop: true
        - match: '\\.'
          scope: constant.character.escape.protobuf

  numbers:
    - match: '\b\d+\b'
      scope: constant.numeric.integer.protobuf
